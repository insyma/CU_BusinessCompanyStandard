var insymaOverlaybox,Iob_Options;Iob_Options=(function(){function b(){this.loadingImg="../img/layout/loading.gif";this.opacity=0.3;this.playDuration=2000;this.closeOnOverlay=true;this.maxHeight=600;this.maxWidth=800;this.minHeight=200;this.minWidth=200;this.boxMarginTopBot=50;this.boxMarginLeftRight=20;this.resizeDelay=10;this.showCounter=true;this.mobileView=true;this.mobileFor="iPhone|Android";this.container=".insymaNewThumbs, .insymaImgListThumbs, .insymaNewProdThumbs, .part_movie, .insymaImgThumbs";this.selects={img:["a.imagelink","a.imagelinks"],movie:["a.movielink"],content:[]}}b.prototype.addOptions=function(d){for(var c in d){this[c]=d[c]}};return b})();insymaOverlaybox=(function(){function b(c){this.options=c;this.allContent=[];this.currentItem=0;this.currentAlbum=0;this.currentType="";this.callbackOnClose=[];this.imgSize=[];this.isPlaying=false;this.timeOut;this.init()}b.prototype.init=function(){this.grabStuff();this.buildObjects();this.initActions()};b.prototype.grabStuff=function(){var g=this;var f=$(g.options.container);var e=g.options.selects;var c="";var d="";for(a=0;a<f.length;a++){d=$(f[a]).find(e.img.join(","));c=$(f[a]).find(e.movie.join(","));g.allContent[a]=[];for(i=0;i<d.length;i++){$link=$(d[i]);$link.attr({id:"il_"+a+"_"+i,"data-id":i,"data-album":a});g.allContent[a].push({type:"img",src:$link.attr("href"),title:((typeof $link.attr("title")=="undefined"||$link.attr("title")=="")?$link.find("img").attr("alt"):$link.attr("title"))})}for(i=0;i<c.length;i++){$movie=$(c[i]);$movie.attr({"data-id":i,"data-album":a});g.allContent[a].push({type:"movie",title:$movie.attr("title"),content:$("#overlayMovie_"+$movie.attr("data-content-id")).find("div.movie-holder")})}}$("body").on("click","a.imagelink, a.movielink",function(h){g.start($(h.currentTarget));return false})};b.prototype.buildObjects=function(){$("<div>",{id:"insymaOverlay"}).append('<span id="insymaOverlayLoading" style="display:;"><img src="'+this.options.loadingImg+'" /></span>').hide().after($("<div>",{id:"insymaOverlayHolder"}).hide().append($("<div>",{id:"insymaOverlayInner"}).append($("<div>",{id:"insymaOverlayContent"}).after($("<span>",{"class":"icon close",title:this.options.labelClose}).after($("<span>",{"class":"icon prev",title:this.options.labelPrev}).after($("<span>",{"class":"icon next",title:this.options.labelNext}).after($("<span>",{"class":"icon play",title:this.options.labelPlay}).after($("<span>",{"class":"icon stop",title:this.options.labelStop}).after($("<div>",{"class":"textcont"}).hide().after($("<span>",{"class":"countspan"}).after($("<span>",{"class":"descspan"}).hide()))))))))))).appendTo(document.body)};b.prototype.initActions=function(){var d=this;var c=$("#insymaOverlayInner");if(this.options.closeOnOverlay){$("#insymaOverlay, #insymaOverlayHolder").css("cursor","pointer").on("click",function(f){if(f.target.id=="insymaOverlayHolder"||f.target.id=="insymaOverlay"){d.close()}})}c.find(".close").on("click",function(){d.close()});c.find(".prev").on("click",function(){d.stopAll();d.currentItem--;d.checkCurrentImg(d.currentItem);d.showImg()});c.find(".next").on("click",function(){d.stopAll();d.currentItem++;d.checkCurrentImg(d.currentItem);d.showImg()});c.find(".play").on("click",function(){d.playAll()});c.find(".stop").hide().on("click",function(){d.stopAll()})};b.prototype.start=function(d){var c=this;c.currentItem=parseInt($(d).attr("data-id"));c.currentAlbum=$(d).attr("data-album");c.currentType=c.allContent[c.currentAlbum][c.currentItem].type;c.enableKeyboardNav();c.openOverlay();switch(c.currentType){case"img":c.showImg();break;case"movie":c.showMovie();break}$(window).on("resize",function(){var e;clearTimeout(e);e=setTimeout(function(){c.resizeOverlybox();c.resizeContainer()},c.options.resizeDelay)})};b.prototype.showMovie=function(){var d=this;var c=$("#insymaOverlayContent");c.html(d.allContent[d.currentAlbum][d.currentItem].content);d.open();d.setNavigation();d.resizeContainer();d.setTitle()};b.prototype.showImg=function(){var g=this,d,f=g.allContent[g.currentAlbum][g.currentItem].src;var e=$("#insymaOverlayContent");e.html("");if($("#iob-image").length<1){d=$("<img id='iob-image' />").appendTo(e)}else{d=$("#iob-image")}if(g.allContent[g.currentAlbum][g.currentItem].content!==""){$("#insymaOverlayInner .textcont").html(g.allContent[g.currentAlbum][g.currentItem].content).show()}else{$("#insymaOverlayInner .textcont").html("").hide()}var c=new Image;c.onload=function(){g.imgSize={w:c.width,h:c.height};d.attr("src",f);g.open();return g.resizeContainer()};c.src=f;g.setNavigation();g.preloadNext();g.setTitle()};b.prototype.openContent=function(d){var g=this;var f=$("#insymaOverlayContent");f.html("");f.removeClass("content").removeClass("iframe");if(d.type==="iframe"){g.currentAlbum="iframe";g.currentItem=0;g.currentType="iframe";f.addClass("iframe");f.html('<div class="iframe-holder"><iframe width="700" scrolling="auto" height="600" frameborder="0" src="'+d.content+'" /><div class="ratio" style="padding-top:84.57%"></div></div>');g.allContent[g.currentAlbum]=[];g.allContent[g.currentAlbum].push({type:g.currentType})}if(d.type==="content"){g.currentAlbum="content";g.currentItem=0;g.currentType="content";f.addClass("content");f.append(d.content.show());var e=g.maxWidth;var c=g.maxHeight;if(typeof d==="object"){if(typeof d.w!==undefined){e=d.w}if(typeof d.h!==undefined){c=d.h}}g.allContent[g.currentAlbum]=[];g.allContent[g.currentAlbum].push({type:g.currentType,height:c,width:e})}$(window).on("resize",function(){var h;clearTimeout(h);h=setTimeout(function(){g.resizeOverlybox();g.resizeContainer()},g.options.resizeDelay)});g.open();g.setNavigation();g.resizeContainer();g.setTitle()};b.prototype.resizeOverlybox=function(){$("#insymaOverlay").width($(window).width()).height($("#insymaOverlay").height()-100).height($(document).height())};b.prototype.mobileView=function(){var j=this,m,e=$("#insymaOverlayHolder"),k=$("#insymaOverlayContent"),d=$("#insymaOverlayInner"),h=$("#insymaOverlayInner .textcont"),g=d.find(".descspan").outerHeight(true);var c=(h.css("float")=="left"||h.css("float")=="right")?true:false;var l=d.outerHeight(true)-d.height()+(!c&&h.is(":visible")?h.outerHeight(true):0);var f=(d.outerWidth(true)-d.width())+(c&&h.is(":visible")?h.outerWidth(true):0);e.css({"margin-top":""});d.css({"max-width":""});k.css({height:""});$("#iob-image").css({width:""});if(window.orientation==0){m=window.innerHeight-g-l-20;wpWM=window.innerWidth-f-20;k.find("img").css("max-width",d.width())}else{m=window.innerHeight-g-l-10;wpWM=window.innerWidth-f-20}e.addClass("mobile");k.css({"max-height":m});h.appendTo(k);if($("#sTop").length<1){k.append("<div id='sTop' class='shadow-top'></div>")}if($("#sBot").length<1){k.append("<div id='sBot' class='shadow-bot'></div>")}if($("#sSize").length<1){d.append("<span id='sSize' class='icon resize'></span>");$("#sSize").click(function(){if($(this).hasClass("resize")){if(window.orientation==0){k.find("img").css("max-width",k.width());if(k.find("img").width()<k.find("img").height()){k.find("img").css("max-height",k.height())}}else{k.find("img").css("max-height",k.height())}$("#sTop, #sBot").hide();$(this).removeClass("resize").addClass("size")}else{k.find("img").css("max-width",d.width());k.find("img").css("max-height","none");$("#sBot").show();$(this).removeClass("size").addClass("resize")}})}else{$("#sSize").show()}if(j.imgSize.h>parseInt(k.css("max-height"))){$("#sTop").width(d.width()).css("top",parseInt(k.position().top)+5).hide();$("#sBot").width(d.width()).css("top",parseInt(m+parseInt(k.position().top))-1)}else{$("#sTop").fadeOut();$("#sBot").fadeOut()}k.scroll(function(n){if(n.target.scrollTop==0){$("#sTop").hide()}if(n.target.scrollTop>0&&n.target.scrollTop<n.target.scrollHeight-n.target.offsetHeight){$("#sTop").fadeIn();$("#sBot").fadeIn()}if(n.target.scrollTop==n.target.scrollHeight-n.target.offsetHeight){$("#sBot").hide()}});return false};b.prototype.resizeContainer=function(){if(this.options.mobileView){var f=new RegExp(this.options.mobileFor,"i");if(f.test(navigator.userAgent)){if(window.orientation!=0){return this.mobileView()}}}var p=this;var t=p.allContent[p.currentAlbum][p.currentItem].type;var q=$(window).height();var g=$(window).width();var w=$("#insymaOverlayHolder");var r=$("#insymaOverlayContent");var m=$("#insymaOverlayInner");var l=$("#insymaOverlayInner .textcont");var h=(l.css("float")=="left"||l.css("float")=="right")?true:false;var v=m.find(".descspan").outerHeight(true);var n=parseInt(m.css("padding-top"))+parseInt(m.css("padding-bottom"))+(!h&&l.is(":visible")?l.outerHeight(true):0);var e=parseInt(m.css("padding-left"))+parseInt(m.css("padding-right"))+(h&&l.is(":visible")?l.outerWidth(true):0);var o=v+n;var c=g-p.options.boxMarginLeftRight-e;var k=q-p.options.boxMarginTopBot-v-n;var u=((p.imgSize.w*k)/p.imgSize.h);var d=(p.imgSize.h*c)/p.imgSize.w;w.removeClass("mobile");$("#iob-image").css({"max-width":""});$("#sBot, #sTop, #sSize").hide();if(t=="movie"){var s=r.find("iframe").length>0?parseInt(r.find("iframe").attr("width")):parseInt(r.find("object").attr("width"));m.css("max-width",s);r.css("height","auto")}else{if(t=="content"){m.css("max-width",p.allContent[p.currentAlbum][p.currentItem].width);var j=p.allContent[p.currentAlbum][p.currentItem].height;if(parseInt(p.allContent[p.currentAlbum][p.currentItem].height)>q){j=k}else{j=p.allContent[p.currentAlbum][p.currentItem].height}r.css("height",j)}else{r.css("max-width","100%");if(p.imgSize.h>p.imgSize.w){if(p.imgSize.h+o+p.options.boxMarginTopBot>q){r.css("height",k);m.css("max-width",u+e);if(u+e+p.options.boxMarginLeftRight>g){r.css("height",d);m.css("max-width",c)}}else{r.css("height",p.imgSize.h);m.css("max-width",p.imgSize.w+e);if(p.imgSize.w+e+p.options.boxMarginLeftRight>g){r.css("height",d);m.css("max-width",c)}}}else{if(p.imgSize.h===p.imgSize.w){if(p.imgSize.w+e+p.options.boxMarginLeftRight>g){r.css("height",c);m.css("max-width",c+e)}if(p.imgSize.h+o+p.options.boxMarginTopBot<q){if(p.imgSize.w<g){r.css("height",p.imgSize.h);r.css("max-width",p.imgSize.w);m.css("max-width",p.imgSize.h+e)}}else{r.css("height","auto");m.css("max-width",u+e)}}else{if(p.imgSize.h+o+p.options.boxMarginTopBot>q){if(d+o+p.options.boxMarginTopBot>q){r.css("height",k);m.css("max-width",u+e)}else{m.css("max-width",c+e);r.css("height",d)}}else{r.css("height",p.imgSize.h);m.css("max-width",c);if(p.imgSize.w+e+p.options.boxMarginLeftRight<g){m.css("max-width",p.imgSize.w+e)}else{m.css("max-width",c+e);r.css("height",d)}}}}$("#iob-image").width(p.imgSize.w)}}w.css("margin-top",(w.outerHeight()/2)*-1)};b.prototype.setTitle=function(){var e=this,d=e.allContent[e.currentAlbum][e.currentItem].title,c=$("#insymaOverlayInner").find(".descspan");(d!==""&&typeof d!=="undefined")?c.html(e.allContent[e.currentAlbum][e.currentItem].title).show():c.hide()};b.prototype.setCounter=function(){if(this.options.showCounter){var d=this,c=$("#insymaOverlayInner").find(".countspan");c.show();c.html(d.options.labelImage+" "+(d.currentItem+1)+" "+d.options.labelFrom+" "+(d.allContent[d.currentAlbum].length))}};b.prototype.setNavigation=function(){var d=this;var c=$("#insymaOverlayInner");if(d.allContent[d.currentAlbum].length==1){c.find(".prev, .next, .play, .stop, .countspan").hide()}else{d.setCounter();c.find(".prev, .next").show();if(d.isPlaying){c.find(".play").hide();c.find(".stop").show()}else{c.find(".play").show();c.find(".stop").hide()}}};b.prototype.playAll=function(){var c=this;c.isPlaying=true;c.setNavigation();c.timeOut=setTimeout(function(){if(c.currentItem>=c.allContent[c.currentAlbum].length-1){c.currentItem=-1}c.currentItem++;c.showImg();c.playAll()},c.options.playDuration)};b.prototype.stopAll=function(){var c=this;c.isPlaying=false;if(c.timeOut){clearTimeout(c.timeOut)}c.setNavigation()};b.prototype.preloadNext=function(){var e=this,c,d;if(e.currentItem<e.allContent[e.currentAlbum].length-1){c=new Image;c.src=e.allContent[e.currentAlbum][e.currentItem+1].src}if(e.currentItem>0){d=new Image;d.src=e.allContent[e.currentAlbum][e.currentItem-1].src}};b.prototype.checkCurrentImg=function(c){var d=this;if(c>d.allContent[d.currentAlbum].length-1){d.currentItem=0}else{if(c<0){d.currentItem=d.allContent[d.currentAlbum].length-1}else{d.currentItem=c}}};b.prototype.enableKeyboardNav=function(){var c=this;$(document).on("keydown",function(f){if(f.keyCode==39&&c.allContent[c.currentAlbum].length>1){c.stopAll();c.currentItem++;c.checkCurrentImg(c.currentItem);c.showImg()}if(f.keyCode==37&&c.allContent[c.currentAlbum].length>1){c.stopAll();c.currentItem--;c.checkCurrentImg(c.currentItem);c.showImg()}if(f.keyCode==27){c.stopAll();c.close()}if(f.keyCode==32&&c.allContent[c.currentAlbum].length>1){if(c.isPlaying){c.stopAll()}else{c.playAll()}return false}if(f.keyCode==32&&c.currentType=="movie"){var d=$("#insymaOverlayContent").find("iframe");if(d.length>0){var g=d.attr("id");if(d.hasClass("youtube")){(players[g].getPlayerState()==-1||players[g].getPlayerState()==2)?players[g].playVideo():players[g].pauseVideo()}if(d.hasClass("vimeo")){insymaVideo._isVimeoPaused?insymaVideo.postSingleMessageVimeo("play",g):insymaVideo.postSingleMessageVimeo("pause",g)}}else{}}f.preventDefault()})};b.prototype.disableKeyboardNav=function(){$(document).off("keydown")};b.prototype.openOverlay=function(){var c=this;$("#insymaOverlayLoading").show();$("#insymaOverlay").width($(document).width()).height($(document).height()).show().animate({opacity:c.options.opacity},600)};b.prototype.open=function(){var c=this;$("#insymaOverlayLoading").hide();$("#insymaOverlayHolder").show().animate({opacity:1},600)};b.prototype.close=function(){var d=this;d.stopAll();$("#insymaOverlay, #insymaOverlayHolder").animate({opacity:0},600,function(){$(this).hide()});d.disableKeyboardNav();$(window).off("resize",this.resizeOverlybox);$(window).off("resize",this.resizeContainer);for(var c in d.callbackOnClose){d.callbackOnClose[c].call(this)}};b.prototype.onClose=function(c){if(c&&typeof c=="function"){this.callbackOnClose.push(c)}};return b})();jQuery.fn.cShow=function(){var b=$(this[0]);b.addClass("iob-show").removeClass("iob-hide")};jQuery.fn.cHide=function(){var b=$(this[0]);b.addClass("iob-hide").removeClass("iob-show")};